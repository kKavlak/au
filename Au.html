<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Altın yatırım amk</title>
</head>
<style>
    body{
        font-family: Verdana, Geneva, Tahoma, sans-serif;
        text-align: center;
    }
</style>
<body>
    <h2>Yatırım Belirle</h2>
    <input type="text" name="" id="newGram"> Gram var <br> <br>
    <input type="text" id="newInvst"> ₺ yatırıldı <br> <br>
    <button id="update">Belirle</button>
    <h2>Altın Gram Fiyatı gir</h2>
    <a href="https://tr.tradingview.com/symbols/XAUTRYG/" target="_blank">
        (Bilmiyorsan bak)
    </a> <br> <br>
    <input type="text" id="getPrice"> ₺/gr 
    <br> <br>
    <button id="submitPrice">Hesapla</button>
    <h3 id="result"></h3>
    <p id="gram"></p> 
    <p id="sonuc"></p>
    <p id="investment"></p>
    

    <script>
        function conct(text){
            return document.getElementById(text);
        }
        
        const price = conct("getPrice");
        const submit = conct("submitPrice");
        const result = conct("result");
        const gram = conct("gram");
        const invst = conct("investment");
        const sonuc = conct("sonuc");

        var gotGram = localStorage.getItem("currGram");
        var gotInvest = localStorage.getItem("currInvst");
        
        if (gotGram == null){
            gotGram = 5.25;
        }

        if (gotInvest == null){
            gotInvest = 15790;
        }

        function calcMoney(){            
            //console.log(price.value);
            var money = price.value;
            if(!isNaN(money)){
            var profit = money * gotGram - gotInvest;
            result.innerText = `Edilen kar: ${profit} ₺`;
            gram.innerText = `Eldeki altın: ${gotGram} gram`;
            invst.innerText = `Yatırılan para: ${gotInvest} ₺`;
            sonuc.innerText = `Şimdiki ederi: ${money*gotGram} ₺`
            } else{
                window.alert("Girdiğiniz şey sayı değildi!")
            }
        }

        function updateStuff(){
            
            gotGram = newGram.value;
            gotInvest = newInvst.value;
            if(!isNaN(gotGram)&&!isNaN(gotInvest)){
            localStorage.setItem("currGram", gotGram);
            localStorage.setItem("currInvst",gotInvest);
            if(price.value){
            calcMoney()}
            } else{
                window.alert("Girdiğiniz şey sayı değildi!")
            }
        }

        submit.onclick = function(){
            calcMoney();
        }

        update.onclick = function(){
            updateStuff();
        }
    </script>
</body>
</html>